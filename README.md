
# ๐ Switch Image Update via Console Server

ุงู ุงุณฺฉุฑูพุช ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงููู **`pexpect`** ุจู ฺฉ **ุณุฑูุฑ ฺฉูุณูู** ูุตู ูโุดูุฏ ู ุนููุงุช **ุจูโุฑูุฒุฑุณุงู ุณุณุชูโุนุงูู ุณูฺ** ุฑุง ุงุฒ ุทุฑู ฺฉ **ุณุฑูุฑ HTTP** ุงูุฌุงู ูโุฏูุฏ.  
ุฎุฑูุฌโูุง ุจูโุตูุฑุช ุฒูุฏู ุจุง ุงุณุชูุงุฏู ุงุฒ **ูุงฺูู `logging`** ุฏุฑ ุชุฑููุงู ููุงุด ุฏุงุฏู ูโุดููุฏ.  

---

## โจ ูฺฺฏโูุง
- ๐ **ุงุชุตุงู ุฎูุฏฺฉุงุฑ** ุจู ุณุฑูุฑ ฺฉูุณูู ุจุง SSH  
- ๐ฅ **ูุฑูุฏ ุจู ูพูุฑุช ุณุฑุงู** ู ุงุญุฑุงุฒ ููุช ุฑู ุณูฺ  
- ๐ ุงุฌุฑุง ูุฑูุงู `update image` ุงุฒ ุทุฑู HTTP  
- ๐ **ููุงุด ุฒูุฏู ุฎุฑูุฌ** ุฏุฑ ุชุฑููุงู  
- ๐ก **ูุฏุฑุช ุฎุทุงูุง** ุจุง `try/except/finally`  

---

## ๐ฆ ูพุดโูุงุฒูุง
- ๐ **Python 3.6+**
- ๐ ูุตุจ ฺฉุชุงุจุฎุงููโูุง:
  ```bash
  pip install pexpect

- ุฏุณุชุฑุณ ุจู:

  {     
        ุณุฑูุฑ ฺฉูุณูู (IP ู ูุฒุฑ/ูพุณูุฑุฏ)
        ุงุทูุงุนุงุช ูุฑูุฏ ุจู ุณูฺ   
        ูุจโุณุฑูุฑ ุญุงู ูุงู ุณุณุชูโุนุงูู
        IP ูุฏุฑุช ุณูฺ ู Gateway ูพุดโูุฑุถ
   }   
   
---

## โ ูพฺฉุฑุจูุฏ ูพุดโูุฑุถ ุฏุฑ ฺฉุฏ

```python
console_ip = "192.168.30.20"
console_pass = "123"
switch_user = "admin"
switch_pass = "zharfpouyan"
webserver_ip = "192.168.0.19"
default_gw = "192.168.30.2"
```

> ๐ **ูฺฉุชู:** ุงู ููุงุฏุฑ ุฑุง ูุชูุงุณุจ ุจุง ุดุจฺฉูู ุฎูุฏ ุชุบุฑ ุฏูุฏ.

---

## โถ ูุญููู ุงุฌุฑุง

1. ๐พ ฺฉุฏ ุฑุง ุฏุฑ ฺฉ ูุงู ุฐุฎุฑู ฺฉูุฏุ ูุซูุง:

   ```bash
   nano update_switch.py
   ```

2. โถ ุงุฌุฑุง ฺฉูุฏ:

   ```bash
   python update_switch.py
   ```

3. โจ ุฏุฑ ุญู ุงุฌุฑุงุ ุงุทูุงุนุงุช ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:

   * **Console server username** ๐งโ๐ป
   * **Image filename** ๐ (ูุงู ูุงู ุฑู ูุจโุณุฑูุฑ)
   * **Management IP with subnet** ๐ (ูุซู: `192.168.30.34/24`)

4. ๐ ุงุณฺฉุฑูพุช ุจูโุทูุฑ ุฎูุฏฺฉุงุฑ ุจู ุณุฑูุฑ ฺฉูุณูู ูุตู ุดุฏู ู ุนููุงุช ุขูพุฏุช ุฑุง ุงูุฌุงู ูโุฏูุฏ.

---

## ๐ ุฎุฑูุฌ

* ๐ก ุชูุงู ูพุงูโูุง ู ูพุงุณุฎโูุง ุณูฺ ุจูโุตูุฑุช ุฒูุฏู ุฏุฑ ุชุฑููุงู ููุงุด ุฏุงุฏู ูโุดููุฏ.
* โ ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉูุ ูพุงู ุฎุทุง ุจูโูุถูุญ ุซุจุช ูโุดูุฏ.

---

## โ ูฺฉุงุช ููู

* ูุจู ุงุฒ ุงุฌุฑุง ูุทูุฆู ุดูุฏ ฺฉู **ุณุฑูุฑ ฺฉูุณูู ุจู ูพูุฑุช ุณุฑุงู ุณูฺ ูุชุตู ุงุณุช**.
* ูุงู **ุณุณุชูโุนุงูู** ุจุงุฏ ุฏุฑ **ูุจโุณุฑูุฑ** ูุฑุงุฑ ุฏุงุดุชู ุจุงุดุฏ ู ุงุฒ ุทุฑู IP ุชุนูโุดุฏู ูุงุจู ุฏุณุชุฑุณ ุจุงุดุฏ.
* ุชุงูโุงูุช ุนููุงุช ุขูพุฏุช ุฑู **ฑฐ ุฏููู** ุชูุธู ุดุฏู ุงุณุช โณ (`timeout=600`).

---

## ๐ ูุฌูุฒ

ุงู ุงุณฺฉุฑูพุช **ุขุฒุงุฏ** ุจุฑุง ุงุณุชูุงุฏู ุฏุงุฎู ุดูุง ุงุณุช.
ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ูุญุทโูุง ุญุณุงุณุ ุงุจุชุฏุง ุขู ุฑุง ุฏุฑ ูุญุท ุชุณุช ุงุฌุฑุง ฺฉูุฏ ๐งช.